<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–°–ª–æ—Ç—ã - SocialSpin Casino</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&family=Montserrat:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        html, body { height: 100%; overflow: hidden; }
        body { background: #04142a; font-family: 'Roboto', sans-serif; color: #fff; }
        
        .game-wrapper { 
            height: 100vh; 
            display: flex; 
            flex-direction: column; 
            padding: 0.5rem; 
            gap: 0.5rem; 
        }
        
        .header { 
            position: relative; 
            text-align: center; 
            flex-shrink: 0; 
        }
        
        .header h1 { 
            font-size: clamp(1rem, 2rem, 2rem); 
            color: #e91616; 
            margin: 0; 
            text-shadow: 0 0 20px rgba(233, 22, 22, 0.5); 
        }
        
        .header p { 
            font-size: clamp(0.6rem, 0.9rem, 0.9rem); 
            color: #00ffff; 
            margin: 0.3rem 0; 
        }
        
        .home-btn { 
            position: absolute; 
            top: 0.5rem; 
            left: 0.5rem; 
            background: #4caf50; 
            color: white; 
            padding: 0.6rem 1.2rem; 
            border-radius: 8px; 
            font-size: 0.85rem; 
            font-weight: 600; 
            text-decoration: none; 
            transition: all 0.3s; 
        }
        
        .home-btn::before {
            content: "–ì–ª–∞–≤–Ω–∞—è";
        }
        
        .stats-bar { 
            display: flex; 
            justify-content: space-around; 
            background: linear-gradient(135deg, #1a0038 0%, #04142a 100%); 
            padding: 0.6rem; 
            border-radius: 8px; 
            border: 2px solid #2196f3; 
            flex-shrink: 0; 
        }
        
        .stat-item { text-align: center; }
        .stat-label { font-size: 0.6rem; color: #888; margin-bottom: 0.2rem; }
        .stat-value { font-size: clamp(0.9rem, 1.3rem, 1.3rem); font-weight: 700; color: #00ffff; }
        
        .game-box { 
            background: linear-gradient(135deg, #0a0a0a 0%, #1a0038 100%); 
            border-radius: 12px; 
            padding: 1rem; 
            border: 2px solid #e91616; 
            flex: 1; 
            display: grid; 
            grid-template-columns: 1fr auto;
            gap: 1rem;
            overflow: hidden; 
            min-height: 0; 
        }
        
        .game-content {
            display: flex;
            flex-direction: column;
            overflow: hidden;
            min-height: 0;
        }
        
        .wins-panel {
            background: linear-gradient(135deg, #1a0038 0%, #0a0a0a 100%);
            padding: 1rem;
            border-radius: 12px;
            border: 2px solid #00ffff;
            min-width: 200px;
            max-width: 250px;
        }
        
        .wins-panel h3 {
            font-size: clamp(0.9rem, 1.1rem, 1.1rem);
            color: #00ffff;
            margin-bottom: 0.8rem;
            text-align: center;
            font-weight: 700;
            text-transform: uppercase;
        }
        
        .wins-table {
            width: 100%;
            border-collapse: collapse;
        }
        
        .wins-table td {
            padding: 0.5rem;
            font-size: clamp(0.7rem, 0.85rem, 0.85rem);
            border-bottom: 1px solid rgba(0, 255, 255, 0.2);
        }
        
        .wins-table td:first-child {
            text-align: center;
            font-size: clamp(1.2rem, 1.5rem, 1.5rem);
        }
        
        .wins-table td:last-child {
            text-align: right;
            color: #4caf50;
            font-weight: 700;
        }
        
        .wins-table tr:last-child td {
            border-bottom: none;
        }
        
        .reels-container {
            flex: 1;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 1rem;
            margin: 1rem 0;
        }
        
        .reel {
            width: clamp(80px, 20vw, 120px);
            height: clamp(240px, 60vw, 360px);
            background: linear-gradient(180deg, #0a0a0a 0%, #1a0038 100%);
            border: 4px solid #333;
            border-radius: 12px;
            overflow: hidden;
            position: relative;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
        }
        
        .reel-content {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }
        
        .symbol {
            width: 100%;
            height: 33.333%;
            min-height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: clamp(3rem, 7vw, 5rem);
            background: #fff;
            border-bottom: 2px solid #ddd;
        }
        
        .symbol:last-child {
            border-bottom: none;
        }
        
        .bet-controls {
            display: flex;
            justify-content: center;
            gap: 0.5rem;
            margin: 1rem 0;
            flex-wrap: wrap;
        }
        
        .bet-btn {
            background: linear-gradient(135deg, #2196f3, #1976d2);
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 8px;
            font-size: clamp(0.75rem, 1rem, 1rem);
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
        }
        
        .bet-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(33, 150, 243, 0.4);
        }
        
        .bet-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        .controls {
            display: flex;
            justify-content: center;
            gap: 1rem;
            flex-wrap: wrap;
            flex-shrink: 0;
        }
        
        .btn { 
            padding: clamp(0.7rem, 1rem, 1rem) clamp(1.2rem, 1.8rem, 1.8rem); 
            border: none; 
            border-radius: 10px; 
            font-size: clamp(0.85rem, 1.1rem, 1.1rem); 
            font-weight: 600; 
            cursor: pointer; 
            font-family: 'Montserrat', sans-serif; 
            text-transform: uppercase; 
            transition: all 0.3s; 
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3); 
        }
        
        .btn-spin { 
            background: linear-gradient(135deg, #e91616 0%, #c62828 100%); 
            color: white; 
            font-size: clamp(1rem, 1.3rem, 1.3rem); 
        }
        .btn-spin-green { 
            background: linear-gradient(135deg, #4caf50 0%, #388e3c 100%); 
            color: white; 
            font-size: clamp(1rem, 1.3rem, 1.3rem); 
        }
        .btn-spin:disabled, .btn-spin-green:disabled { opacity: 0.5; cursor: not-allowed; }
        
        .message-overlay {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 10000;
            pointer-events: none;
        }
        
        .msg {
            font-size: clamp(1.5rem, 3.5vw, 2.5rem);
            font-weight: 900;
            padding: 2rem 3rem;
            border-radius: 16px;
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.8);
            animation: messageAppear 0.6s ease-out;
            text-align: center;
            min-width: 250px;
            text-shadow: 0 0 15px rgba(0, 0, 0, 0.9);
        }
        
        .msg-win { background: linear-gradient(135deg, #4caf50, #66bb6a); border: 5px solid #ffd700; color: #fff; }
        .msg-lose { background: linear-gradient(135deg, #e91616, #f44336); border: 5px solid #ff6b6b; color: #fff; }
        
        @keyframes messageAppear {
            from { opacity: 0; transform: scale(0.5); }
            to { opacity: 1; transform: scale(1); }
        }
        
        @media (max-width: 768px) {
            .game-wrapper { padding: 0.3rem; gap: 0.3rem; }
            .header h1 { font-size: 0.9rem; }
            .home-btn { 
                top: 0.3rem; 
                left: 0.3rem; 
                padding: 0.5rem !important; 
                font-size: 1.2rem !important; 
                background: #000 !important; 
                color: #fff !important; 
                border: 2px solid #fff !important;
                width: 40px !important;
                height: 40px !important;
                display: flex !important;
                align-items: center !important;
                justify-content: center !important;
                text-decoration: none !important;
                border-radius: 4px !important;
            }
            
            .home-btn::before {
                content: "‚ò∞" !important;
            }
            .stats-bar { padding: 0.4rem; }
            .stat-label { font-size: 0.5rem; }
            .stat-value { font-size: 0.85rem; }
            .game-box { 
                padding: 0.6rem; 
                grid-template-columns: 1fr;
                grid-template-rows: 1fr auto;
            }
            .wins-panel {
                display: none;
                position: fixed;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                z-index: 9999;
                background: linear-gradient(135deg, #1a0038 0%, #0a0a0a 100%);
                padding: 1.5rem;
                border-radius: 12px;
                border: 3px solid #00ffff;
                box-shadow: 0 10px 50px rgba(0, 0, 0, 0.9);
                max-width: 90vw;
                max-height: 80vh;
                overflow-y: auto;
                min-width: auto;
                max-width: 90vw;
            }
            .wins-panel.show {
                display: block;
            }
            .overlay {
                display: none;
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0, 0, 0, 0.8);
                z-index: 9997;
            }
            .overlay.show {
                display: block;
            }
            .wins-panel h3 {
                font-size: 0.8rem;
                margin-bottom: 0.5rem;
            }
            .wins-table td {
                padding: 0.4rem;
                font-size: 0.65rem;
            }
            .wins-table td:first-child {
                font-size: 1rem;
            }
            .reels-container { gap: 0.5rem; }
            .reel { width: 60px; height: 240px; }
            .symbol { height: 80px; font-size: 2.5rem; }
            .bet-controls { gap: 0.3rem; }
            .bet-btn { padding: 0.4rem 0.8rem; font-size: 0.7rem; }
            .controls { gap: 0.5rem; flex-direction: column; }
            .btn { padding: 0.6rem 1rem; font-size: 0.8rem; width: 100%; }
            .msg { font-size: 1.5rem; padding: 1rem 1.5rem; min-width: 200px; }
        }
        
        @media (min-width: 769px) {
            .overlay {
                display: none !important;
            }
            #hintBtn {
                display: none !important;
            }
            .controls {
                margin-top: -0.5rem;
            }
        }
    </style>
</head>
<body>
    <div class="game-wrapper">
        <div class="header">
            <a href="index.html" class="home-btn"></a>
            <h1>–°–ª–æ—Ç—ã</h1>
            <p>–ö—Ä—É—Ç–∏—Ç–µ –±–∞—Ä–∞–±–∞–Ω—ã –∏ –≤—ã–∏–≥—Ä—ã–≤–∞–π—Ç–µ!</p>
        </div>
        
        <div class="stats-bar">
            <div class="stat-item">
                <div class="stat-label">–ë–∞–ª–∞–Ω—Å</div>
                <div class="stat-value" id="balance">1000 ‚ÇΩ</div>
            </div>
            <div class="stat-item">
                <div class="stat-label">–°—Ç–∞–≤–∫–∞</div>
                <div class="stat-value" id="bet">50 ‚ÇΩ</div>
            </div>
            <div class="stat-item">
                <div class="stat-label">–ü–æ–±–µ–¥</div>
                <div class="stat-value" id="wins">0</div>
            </div>
        </div>
        
        <div class="game-box">
            <div class="game-content">
                <div class="reels-container" id="reelsContainer"></div>
                
                <div class="bet-controls">
                    <button class="bet-btn" onclick="adjustBet(-50)">-50</button>
                    <button class="bet-btn" onclick="adjustBet(-10)">-10</button>
                    <button class="bet-btn" onclick="adjustBet(10)">+10</button>
                    <button class="bet-btn" onclick="adjustBet(50)">+50</button>
                </div>
                
                <div class="controls">
                    <button class="btn btn-spin-green" id="btnSpin">–ö–†–£–¢–ò–¢–¨</button>
                    <button class="btn btn-spin" id="hintBtn" onclick="toggleHint()">–ö–û–ú–ë–ò–ù–ê–¶–ò–ò</button>
                </div>
            </div>
            
            <div class="overlay" id="overlay" onclick="toggleHint()"></div>
            
            <div class="wins-panel" id="winsPanel">
                <h3>–í—ã–∏–≥—Ä—ã—à–Ω—ã–µ –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏</h3>
                <table class="wins-table">
                    <tr>
                        <td colspan="2" style="padding: 0.3rem; font-size: 0.6rem; color: #888; text-align: center; border-bottom: 1px solid rgba(0, 255, 255, 0.3);">
                            3 –æ–¥–∏–Ω–∞–∫–æ–≤—ã—Ö (–ª–∏–Ω–∏–∏)
                        </td>
                    </tr>
                    <tr>
                        <td>üçíüçíüçí</td>
                        <td>x5</td>
                    </tr>
                    <tr>
                        <td>üçãüçãüçã</td>
                        <td>x8</td>
                    </tr>
                    <tr>
                        <td>üîîüîîüîî</td>
                        <td>x10</td>
                    </tr>
                    <tr>
                        <td>‚≠ê‚≠ê‚≠ê</td>
                        <td>x15</td>
                    </tr>
                    <tr>
                        <td>üíéüíéüíé</td>
                        <td>x25</td>
                    </tr>
                    <tr>
                        <td colspan="2" style="padding: 0.3rem; font-size: 0.6rem; color: #888; text-align: center; border-top: 1px solid rgba(0, 255, 255, 0.3); border-bottom: 1px solid rgba(0, 255, 255, 0.3);">
                            –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ:
                        </td>
                    </tr>
                    <tr>
                        <td colspan="2" style="padding: 0.3rem; font-size: 0.6rem; color: #888; text-align: center;">
                            ‚Ä¢ –î–∏–∞–≥–æ–Ω–∞–ª–∏
                        </td>
                    </tr>
                    <tr>
                        <td colspan="2" style="padding: 0.3rem; font-size: 0.6rem; color: #888; text-align: center;">
                            ‚Ä¢ V-–æ–±—Ä–∞–∑–Ω—ã–µ
                        </td>
                    </tr>
                    <tr>
                        <td colspan="2" style="padding: 0.3rem; font-size: 0.6rem; color: #4caf50; text-align: center; border-top: 1px solid rgba(0, 255, 255, 0.3); border-bottom: 1px solid rgba(0, 255, 255, 0.3); font-weight: 700;">
                            2 –æ–¥–∏–Ω–∞–∫–æ–≤—ã—Ö = x1.5
                        </td>
                    </tr>
                    <tr>
                        <td colspan="2" style="padding: 0.3rem; font-size: 0.65rem; color: #ffd700; text-align: center; font-weight: 700;">
                            –í –ª—é–±–æ–π —Å—Ç—Ä–æ–∫–µ!
                        </td>
                    </tr>
                </table>
            </div>
        </div>
    </div>
    
    <div id="message" class="message-overlay"></div>
    
    <script>
        let balance, bet, wins;
        const symbols = ['üçí', 'üçã', 'üîî', '‚≠ê', 'üíé'];
        const multipliers = {
            'üçíüçíüçí': 5, 'üçãüçãüçã': 8, 'üîîüîîüîî': 10, '‚≠ê‚≠ê‚≠ê': 15, 'üíéüíéüíé': 25
        };
        
        function load() {
            console.log('–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –≤ —Å–ª–æ—Ç–∞—Ö...');
            
            // –ñ–¥–µ–º –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ HeaderBalance
            function waitForHeaderBalance() {
                if (window.HeaderBalance) {
                    const headerBalance = window.HeaderBalance.getBalance();
                    const headerBet = window.HeaderBalance.getBet();
                    
                    // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –∑–Ω–∞—á–µ–Ω–∏—è –≤–∞–ª–∏–¥–Ω—ã
                    if (!isNaN(headerBalance) && !isNaN(headerBet) && headerBalance >= 0 && headerBet >= 0) {
                        balance = headerBalance;
                        bet = headerBet;
                        wins = 0; // –°–±—Ä–∞—Å—ã–≤–∞–µ–º –ø–æ–±–µ–¥—ã –¥–ª—è –∫–∞–∂–¥–æ–π –∏–≥—Ä—ã –æ—Ç–¥–µ–ª—å–Ω–æ
                        try {
                            if (localStorage.getItem('slotsWins')) wins = parseInt(localStorage.getItem('slotsWins'));
                        } catch(e) {}
                        console.log('–ó–∞–≥—Ä—É–∂–µ–Ω—ã –¥–∞–Ω–Ω—ã–µ –∏–∑ HeaderBalance:', { balance, bet, wins });
                        
                        // –û–±–Ω–æ–≤–ª—è–µ–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏
                        updateStats();
                    } else {
                        // –ï—Å–ª–∏ –∑–Ω–∞—á–µ–Ω–∏—è –Ω–µ–≤–∞–ª–∏–¥–Ω—ã, –∂–¥–µ–º –µ—â–µ
                        console.log('HeaderBalance –∑–Ω–∞—á–µ–Ω–∏—è –Ω–µ–≤–∞–ª–∏–¥–Ω—ã, –∂–¥–µ–º...', { headerBalance, headerBet });
                        setTimeout(waitForHeaderBalance, 200);
                    }
                } else {
                    // –ï—Å–ª–∏ HeaderBalance –µ—â–µ –Ω–µ –≥–æ—Ç–æ–≤, –∂–¥–µ–º
                    console.log('HeaderBalance –Ω–µ –≥–æ—Ç–æ–≤, –∂–¥–µ–º...');
                    setTimeout(waitForHeaderBalance, 200);
                }
            }
            
            waitForHeaderBalance();
        }
        
        function save() {
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ç–æ–ª—å–∫–æ –ø–æ–±–µ–¥—ã –ª–æ–∫–∞–ª—å–Ω–æ –¥–ª—è —ç—Ç–æ–π –∏–≥—Ä—ã
            try { localStorage.setItem('slotsWins', wins); } catch(e) {}
        }
        
        function updateStats() {
            // –ü–æ–ª—É—á–∞–µ–º –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ –æ–±—â–µ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
            if (window.HeaderBalance) {
                balance = window.HeaderBalance.getBalance();
                bet = window.HeaderBalance.getBet();
            }
            
            document.getElementById('balance').textContent = balance + ' ‚ÇΩ';
            document.getElementById('bet').textContent = bet + ' ‚ÇΩ';
            document.getElementById('wins').textContent = wins;
        }
        
        function adjustBet(amount) {
            bet = Math.max(10, Math.min(500, bet + amount));
            save();
            updateStats();
        }
        
        function initReels() {
            const container = document.getElementById('reelsContainer');
            container.innerHTML = '';
            
            for (let i = 0; i < 3; i++) {
                const reel = document.createElement('div');
                reel.className = 'reel';
                reel.id = `reel${i}`;
                
                const content = document.createElement('div');
                content.className = 'reel-content';
                content.id = `reelContent${i}`;
                
                // –°–æ–∑–¥–∞–µ–º –º–Ω–æ–≥–æ —Å–∏–º–≤–æ–ª–æ–≤ –¥–ª—è –±–µ—Å—à–æ–≤–Ω–æ–≥–æ –≤—Ä–∞—â–µ–Ω–∏—è (50 —Å–∏–º–≤–æ–ª–æ–≤)
                for (let j = 0; j < 50; j++) {
                    const symbol = document.createElement('div');
                    symbol.className = 'symbol';
                    symbol.textContent = symbols[j % symbols.length];
                    content.appendChild(symbol);
                }
                
                reel.appendChild(content);
                container.appendChild(reel);
            }
            
            // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –Ω–∞—á–∞–ª—å–Ω—É—é –ø–æ–∑–∏—Ü–∏—é –¥–ª—è –≤—Å–µ—Ö –±–∞—Ä–∞–±–∞–Ω–æ–≤
            for (let i = 0; i < 3; i++) {
                const content = document.getElementById(`reelContent${i}`);
                content.style.transform = 'translateY(0%)';
            }
        }
        
        function spin() {
            if (balance < bet) {
                showMessage('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤!', 'lose');
                return;
            }
            
            balance -= bet;
            // –û–±–Ω–æ–≤–ª—è–µ–º –æ–±—â–∏–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –±–∞–ª–∞–Ω—Å–∞
            if (window.HeaderBalance) {
                window.HeaderBalance.subtractBalance(bet);
                balance = window.HeaderBalance.getBalance(); // –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ–º
            }
            updateStats();
            document.getElementById('btnSpin').disabled = true;
            
            const finalSymbols = [];
            const spinConfigs = [
                { duration: 2000, slowdownStart: 1500 },
                { duration: 2500, slowdownStart: 2000 },
                { duration: 3000, slowdownStart: 2500 }
            ];
            let stopped = 0;
            
            for (let i = 0; i < 3; i++) {
                const content = document.getElementById(`reelContent${i}`);
                const targetSymbol = symbols[Math.floor(Math.random() * symbols.length)];
                finalSymbols.push(targetSymbol);
                
                // –í—ã—á–∏—Å–ª—è–µ–º —Ñ–∏–Ω–∞–ª—å–Ω—É—é –ø–æ–∑–∏—Ü–∏—é –¥–ª—è —Ü–µ–ª–µ–≤–æ–≥–æ —Å–∏–º–≤–æ–ª–∞
                const targetIndex = symbols.indexOf(targetSymbol);
                
                let currentPosition = 0;
                let speed = 20;
                let startTime = null;
                let lastFrameTime = null;
                const config = spinConfigs[i];
                
                function animateFrame(timestamp) {
                    if (!startTime) {
                        startTime = timestamp;
                        lastFrameTime = timestamp;
                        requestAnimationFrame(animateFrame);
                        return;
                    }
                    
                    const elapsed = timestamp - startTime;
                    const deltaTime = timestamp - lastFrameTime;
                    lastFrameTime = timestamp;
                    
                    // –§–∞–∑–∞ —É—Å–∫–æ—Ä–µ–Ω–∏—è –∏ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–π —Å–∫–æ—Ä–æ—Å—Ç–∏ (0-60%)
                    if (elapsed < config.slowdownStart) {
                        speed = 20;
                    }
                    // –§–∞–∑–∞ –∑–∞–º–µ–¥–ª–µ–Ω–∏—è (60-80%)
                    else if (elapsed < config.duration * 0.8) {
                        const slowdownProgress = (elapsed - config.slowdownStart) / (config.duration * 0.8 - config.slowdownStart);
                        speed = 20 * (1 - slowdownProgress);
                        if (speed < 5) speed = 5; // –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å
                    }
                    // –§–∏–Ω–∞–ª—å–Ω–∞—è —Ñ–∞–∑–∞ - –ø–æ–¥–≤–æ–¥ –∫ —Ü–µ–ª–µ–≤–æ–º—É —Å–∏–º–≤–æ–ª—É (80-100%)
                    else if (elapsed < config.duration) {
                        speed = 2; // –û—á–µ–Ω—å –º–µ–¥–ª–µ–Ω–Ω–∞—è
                    }
                    
                    if (elapsed < config.duration) {
                        currentPosition += speed;
                        
                        // –¶–∏–∫–ª–∏—á–µ—Å–∫–æ–µ –¥–≤–∏–∂–µ–Ω–∏–µ (50 —Å–∏–º–≤–æ–ª–æ–≤, –∫–∞–∂–¥—ã–π —Å –≤—ã—Å–æ—Ç–æ–π 33.333%)
                        // 50 —Å–∏–º–≤–æ–ª–æ–≤ √ó 33.333% = 1666.65%
                        if (currentPosition >= 1666.65) {
                            currentPosition = currentPosition % 1666.65;
                        }
                        
                        content.style.transform = `translateY(-${currentPosition}%)`;
                        requestAnimationFrame(animateFrame);
                    } else {
                        // –§–∏–Ω–∞–ª—å–Ω–æ–µ –≤—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏–µ - —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ü–µ–ª–µ–≤—É—é –ø–æ–∑–∏—Ü–∏—é —Å –Ω—É–∂–Ω—ã–º —Å–∏–º–≤–æ–ª–æ–º
                        content.style.transition = 'none';
                        
                        // –ü–µ—Ä–µ—Å—Ç–∞–≤–ª—è–µ–º —Å–∏–º–≤–æ–ª—ã —Ç–∞–∫, —á—Ç–æ–±—ã —Ü–µ–ª–µ–≤–æ–π —Å–∏–º–≤–æ–ª –±—ã–ª –ø–µ—Ä–≤—ã–º (–≤–∏–¥–∏–º—ã–º)
                        const children = content.children;
                        for (let j = 0; j < children.length; j++) {
                            const symbolIndex = (targetIndex + j) % symbols.length;
                            children[j].textContent = symbols[symbolIndex];
                        }
                        
                        // –°–±—Ä–∞—Å—ã–≤–∞–µ–º –ø–æ–∑–∏—Ü–∏—é –Ω–∞ 0
                        content.style.transform = 'translateY(0%)';
                        
                        stopped++;
                        if (stopped === 3) {
                            setTimeout(() => {
                                checkWin(finalSymbols);
                                document.getElementById('btnSpin').disabled = false;
                                save();
                                updateStats();
                            }, 500);
                        }
                    }
                }
                
                setTimeout(() => {
                    requestAnimationFrame(animateFrame);
                }, i * 300);
            }
        }
        
        function checkWin(result) {
            let winAmount = 0;
            let winningCombo = '';
            
            // –ü–æ–ª—É—á–∞–µ–º –≤—Å–µ –≤–∏–¥–∏–º—ã–µ —Å–∏–º–≤–æ–ª—ã (3 —Å–∏–º–≤–æ–ª–∞ –∏–∑ –∫–∞–∂–¥–æ–≥–æ –±–∞—Ä–∞–±–∞–Ω–∞)
            const reels = [];
            for (let i = 0; i < 3; i++) {
                const reelContent = document.getElementById(`reelContent${i}`);
                // –ü–æ–ª—É—á–∞–µ–º –≤—Å–µ —Å–∏–º–≤–æ–ª—ã –∏ –±–µ—Ä–µ–º –ø–µ—Ä–≤—ã–µ 3 (–≤–µ—Ä—Ö–Ω–∏–µ, –∫–æ—Ç–æ—Ä—ã–µ –≤–∏–¥–Ω—ã)
                const allSymbols = Array.from(reelContent.children).map(el => el.textContent);
                // –ë–µ—Ä–µ–º –ø–µ—Ä–≤—ã–µ 3 —Å–∏–º–≤–æ–ª–∞ (–≤–µ—Ä—Ö–Ω—è—è —á–∞—Å—Ç—å, –∫–æ—Ç–æ—Ä–∞—è –≤–∏–¥–Ω–∞)
                const visibleSymbols = allSymbols.slice(0, 3);
                reels.push(visibleSymbols);
            }
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–π –ª–∏–Ω–∏–∏ (–≤–µ—Ä—Ö–Ω—è—è, —Å—Ä–µ–¥–Ω—è—è, –Ω–∏–∂–Ω—è—è)
            for (let row = 0; row < 3; row++) {
                if (reels[0][row] === reels[1][row] && reels[1][row] === reels[2][row]) {
                    const combo = reels[0][row].repeat(3);
                    winAmount = bet * (multipliers[combo] || 2);
                    winningCombo = reels[0][row] + reels[1][row] + reels[2][row];
                    break;
                }
            }
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∏–∞–≥–æ–Ω–∞–ª–∏ —Å–ª–µ–≤–∞ –Ω–∞–ø—Ä–∞–≤–æ (–≤–µ—Ä—Ö ‚Üí —Ü–µ–Ω—Ç—Ä ‚Üí –Ω–∏–∑)
            if (reels[0][0] === reels[1][1] && reels[1][1] === reels[2][2] && winAmount === 0) {
                const combo = reels[0][0].repeat(3);
                winAmount = bet * (multipliers[combo] || 2);
                winningCombo = reels[0][0] + reels[1][1] + reels[2][2];
            }
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∏–∞–≥–æ–Ω–∞–ª–∏ —Å–ø—Ä–∞–≤–∞ –Ω–∞–ª–µ–≤–æ (–≤–µ—Ä—Ö ‚Üí —Ü–µ–Ω—Ç—Ä ‚Üí –Ω–∏–∑)
            if (reels[0][2] === reels[1][1] && reels[1][1] === reels[2][0] && winAmount === 0) {
                const combo = reels[0][2].repeat(3);
                winAmount = bet * (multipliers[combo] || 2);
                winningCombo = reels[0][2] + reels[1][1] + reels[2][0];
            }
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ V-–æ–±—Ä–∞–∑–Ω–æ–π –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏ (–≤–µ—Ä—Ö-–ª–µ–≤–æ, –≤–µ—Ä—Ö-–ø—Ä–∞–≤–æ, –Ω–∏–∑-—Ü–µ–Ω—Ç—Ä)
            if (reels[0][0] === reels[2][0] && reels[0][0] === reels[1][2] && winAmount === 0) {
                const combo = reels[0][0].repeat(3);
                winAmount = bet * (multipliers[combo] || 2);
                winningCombo = reels[0][0] + reels[1][2] + reels[2][0];
            }
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ V-–æ–±—Ä–∞–∑–Ω–æ–π –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏ (–Ω–∏–∑-–ª–µ–≤–æ, –Ω–∏–∑-–ø—Ä–∞–≤–æ, –≤–µ—Ä—Ö-—Ü–µ–Ω—Ç—Ä)
            if (reels[0][2] === reels[2][2] && reels[0][2] === reels[1][0] && winAmount === 0) {
                const combo = reels[0][2].repeat(3);
                winAmount = bet * (multipliers[combo] || 2);
                winningCombo = reels[0][2] + reels[1][0] + reels[2][2];
            }
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª—é–±—ã—Ö 2 –æ–¥–∏–Ω–∞–∫–æ–≤—ã—Ö —Å–∏–º–≤–æ–ª–∞ –≤ —Å—Ç—Ä–æ–∫–µ (WAYS to WIN —Å–∏—Å—Ç–µ–º–∞)
            if (winAmount === 0) {
                for (let row = 0; row < 3; row++) {
                    // –ü—Ä–æ–≤–µ—Ä—è–µ–º –≤—Å–µ –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏ 2 –æ–¥–∏–Ω–∞–∫–æ–≤—ã—Ö
                    if (reels[0][row] === reels[1][row] || reels[1][row] === reels[2][row] || reels[0][row] === reels[2][row]) {
                        winAmount = bet * 1.5; // –£–º–µ—Ä–µ–Ω–Ω—ã–π –≤—ã–∏–≥—Ä—ã—à –∑–∞ 2 —Å–∏–º–≤–æ–ª–∞
                        winningCombo = reels[0][row] + reels[1][row] + reels[2][row] + ' (2x)';
                        break;
                    }
                }
            }
            
            if (winAmount > 0) {
                balance += winAmount;
                wins++;
                // –û–±–Ω–æ–≤–ª—è–µ–º –æ–±—â–∏–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –±–∞–ª–∞–Ω—Å–∞
                if (window.HeaderBalance) {
                    window.HeaderBalance.addBalance(winAmount);
                    balance = window.HeaderBalance.getBalance(); // –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ–º
                }
                showMessage(`–í–´–ò–ì–†–´–®!\n+${winAmount}‚ÇΩ`, 'win');
                updateStats(); // –û–±–Ω–æ–≤–ª—è–µ–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ
            } else {
                showMessage('–ù–ï –í–´–ò–ì–†–´–®', 'lose');
            }
        }
        
        function showMessage(text, type = 'win') {
            const msgArea = document.getElementById('message');
            msgArea.innerHTML = '<div class="msg msg-' + type + '">' + text + '</div>';
            setTimeout(() => msgArea.innerHTML = '', 3000);
        }
        
        function init() {
            load();
            updateStats();
            initReels();
            document.getElementById('btnSpin').addEventListener('click', spin);
        }
        
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', init);
        } else {
            init();
        }
        
        function toggleHint() {
            const panel = document.getElementById('winsPanel');
            const overlay = document.getElementById('overlay');
            
            if (panel && overlay) {
                panel.classList.toggle('show');
                overlay.classList.toggle('show');
            }
        }
        
        function enterFullscreen() {
            const elem = document.documentElement;
            if (elem.requestFullscreen) elem.requestFullscreen();
            else if (elem.webkitRequestFullscreen) elem.webkitRequestFullscreen();
            else if (elem.msRequestFullscreen) elem.msRequestFullscreen();
            else if (elem.mozRequestFullScreen) elem.mozRequestFullScreen();
        }
        setTimeout(enterFullscreen, 500);
    </script>
    
    <!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º header.js –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –±–∞–ª–∞–Ω—Å–∞ -->
    <script src="assets/js/header.js"></script>
</body>
</html>

